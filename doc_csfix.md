# CS FIX
## Install:
1. Install 
    ```bash
    docker-compose exec app composer require --dev friendsofphp/php-cs-fixer
    ```
1. Create cs file `.php-cs-fixer.php` config:
    ```php
    <?php

    $finder = (new PhpCsFixer\Finder())
        ->in(__DIR__)
        ->exclude([
            // 'autogenerated_content',
            // 'tests/fixtures',
        ])
        ->notPath([
            // 'dump.php',
            // 'src/exception_file.php',
        ])
    ;

    return (new PhpCsFixer\Config())
        ->setParallelConfig(PhpCsFixer\Runner\Parallel\ParallelConfigFactory::detect())
        // https://marketplace.visualstudio.com/items?itemName=junstyle.php-cs-fixer
        ->setRules([
            '@PER-CS' => true,
            '@PHP82Migration' => true,
            'strict_param' => true,
            'array_syntax' => ['syntax' => 'short'],
        ])
        ->setFinder($finder)
    ;
    ```
1. Add to .gitignore files:
    ```
    .php-cs-fixer.cache
    .php-cs-fixer.php
    ```
## Useage
```bash
docker-compose exec app vendor/bin/php-cs-fixer fix app --allow-risky=yes
docker-compose exec app vendor/bin/php-cs-fixer fix app --dry-run --allow-risky=yes --show-progress=dots -vvv --diff
```
## On file change for VSCode:
1. Install Name: [File Watcher](https://marketplace.visualstudio.com/items?itemName=appulate.filewatcher)
1. Add settings for project:
    ```json
    {
        "filewatcher.commands": [
            {
                "match": "(?=Users/ayaal/Documents/apps/storage-service/app/*).*(?=\\.php)",
                "isAsync": true,
                "cmd": "file=${file} && cd ${workspaceRoot} && docker exec storage-service-app ./vendor/bin/php-cs-fixer fix ${file/Users\\/ayaal\\/Documents\\/apps\\/storage-service/app} --allow-risky=yes --cache-file=./.php-cs-fixer.cache --quiet",
                "event": "onFileChange"
            }	
        ]
    }
    ```